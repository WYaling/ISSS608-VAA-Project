<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.549">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Gao Ya &amp; Wang Yaling">
<meta name="dcterms.date" content="2024-03-02">

<title>HDB Resale Dataset: Data Preparation</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../Proposal/Proposal.html" rel="prev">
<link href="../images/Website_logo.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="../site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<link href="../site_libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="../site_libs/datatables-binding-0.31/datatables.js"></script>
<script src="../site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="../site_libs/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="../site_libs/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="../site_libs/dt-core-1.13.6/js/jquery.dataTables.min.js"></script>
<link href="../site_libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">
<script src="../site_libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../Data_preparation/Data_Preparation.html">Data Preparation</a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
      <a href="../index.html" class="sidebar-logo-link">
      <img src="../images/hdbresale.png" alt="" class="sidebar-logo py-0 d-lg-inline d-none">
      </a>
      <div class="sidebar-tools-main">
    <a href="https://github.com/WYaling/ISSS608-VAA-Project" title="Github" class="quarto-navigation-tool px-1" aria-label="Github"><i class="bi bi-github"></i></a>
    <a href="https://isss608-vaa-project-group7.netlify.app/" title="Home" class="quarto-navigation-tool px-1" aria-label="Home"><i class="bi bi-house-fill"></i></a>
</div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../about.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Team</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Meeting_Minutes/Meeting_Minutes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Meeting Minutes</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Proposal/Proposal.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Proposal</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Data_preparation/Data_Preparation.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Data Preparation</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#getting-started" id="toc-getting-started" class="nav-link active" data-scroll-target="#getting-started">1 Getting Started</a>
  <ul class="collapse">
  <li><a href="#download-data" id="toc-download-data" class="nav-link" data-scroll-target="#download-data">1.1 Download Data</a></li>
  <li><a href="#load-r-packages" id="toc-load-r-packages" class="nav-link" data-scroll-target="#load-r-packages">1.2 Load R Packages</a></li>
  </ul></li>
  <li><a href="#data-preparation" id="toc-data-preparation" class="nav-link" data-scroll-target="#data-preparation">2 Data Preparation</a>
  <ul class="collapse">
  <li><a href="#import-data" id="toc-import-data" class="nav-link" data-scroll-target="#import-data">2.1 Import Data</a></li>
  <li><a href="#merge-data" id="toc-merge-data" class="nav-link" data-scroll-target="#merge-data">2.2 Merge Data</a></li>
  <li><a href="#extract-data" id="toc-extract-data" class="nav-link" data-scroll-target="#extract-data">2.3 Extract Data</a></li>
  <li><a href="#check-data-health" id="toc-check-data-health" class="nav-link" data-scroll-target="#check-data-health">2.4 Check Data Health</a></li>
  </ul></li>
  <li><a href="#save-data" id="toc-save-data" class="nav-link" data-scroll-target="#save-data">3 Save Data</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">HDB Resale Dataset: Data Preparation</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Gao Ya &amp; Wang Yaling </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">March 2, 2024</p>
    </div>
  </div>
  
    <div>
    <div class="quarto-title-meta-heading">Modified</div>
    <div class="quarto-title-meta-contents">
      <p class="date-modified">March 2, 2024</p>
    </div>
  </div>
    
  </div>
  


</header>


<section id="getting-started" class="level1">
<h1>1 Getting Started</h1>
<section id="download-data" class="level2">
<h2 class="anchored" data-anchor-id="download-data">1.1 Download Data</h2>
<p>The data is sourced from the <a href="https://www.kaggle.com/">Kaggle</a> dataset “<a href="https://www.kaggle.com/datasets/syrahmadi/resale-hdb-flat-prices-2000-2022?resource=download">Resale HDB Flat Prices 2012 - 2023</a>”, which comprises four CSV files as follows:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/Dataset.png" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
<p>The research for this project will be limited to the recent 10 years, from 01/01/2013 to 31/12/2023. Therefore, the required data files are the following three:</p>
<ul>
<li><p>resale-flat-prices-based-on-registration-date-from-mar-2012-to-dec-2014.csv</p></li>
<li><p>resale-flat-prices-based-on-registration-date-from-jan-2015-to-dec-2016.csv</p></li>
<li><p>ResaleflatpricesbasedonregistrationdatefromJan2017onwards.csv</p></li>
</ul>
</section>
<section id="load-r-packages" class="level2">
<h2 class="anchored" data-anchor-id="load-r-packages">1.2 Load R Packages</h2>
<p>R packages required:</p>
<ul>
<li><p><strong>tidyverse</strong> for processing datasets, inside this package we will use:</p>
<ul>
<li><p><strong>readr</strong> for reading CSV files</p></li>
<li><p><strong>dplyr</strong> for operations such as filtering, selecting, transforming, summarizing, and joining data</p></li>
</ul></li>
<li><p><strong>DT</strong> for the creation of interactive HTML tables from R data frames</p></li>
<li><p><strong>summarytools</strong> for generating a descriptive statistical summary of the data frame</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(tidyverse, DT, summarytools)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="data-preparation" class="level1">
<h1>2 Data Preparation</h1>
<section id="import-data" class="level2">
<h2 class="anchored" data-anchor-id="import-data">2.1 Import Data</h2>
<p>The necessary .CSV files will be imported as a list of CSV files, then compiled into a single dataframe using R.</p>
<p>First, let’s take a look at the three CSV files and check their difference.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true">mar-2012-to-dec-2014</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">jan-2015-to-dec-2016</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-3" role="tab" aria-controls="tabset-1-3" aria-selected="false">Jan-2017-onwards</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="co">#read .csv data files</span></span>
<span id="cb2-2"><a href="#cb2-2"></a>data1 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"data/resale-flat-prices-based-on-registration-date-from-mar-2012-to-dec-2014.csv"</span>)</span>
<span id="cb2-3"><a href="#cb2-3"></a><span class="fu">glimpse</span>(data1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 52,203
Columns: 10
$ month               &lt;chr&gt; "2012-03", "2012-03", "2012-03", "2012-03", "2012-…
$ town                &lt;chr&gt; "ANG MO KIO", "ANG MO KIO", "ANG MO KIO", "ANG MO …
$ flat_type           &lt;chr&gt; "2 ROOM", "2 ROOM", "3 ROOM", "3 ROOM", "3 ROOM", …
$ block               &lt;chr&gt; "172", "510", "610", "474", "604", "154", "110", "…
$ street_name         &lt;chr&gt; "ANG MO KIO AVE 4", "ANG MO KIO AVE 8", "ANG MO KI…
$ storey_range        &lt;chr&gt; "06 TO 10", "01 TO 05", "06 TO 10", "01 TO 05", "0…
$ floor_area_sqm      &lt;dbl&gt; 45, 44, 68, 67, 67, 68, 67, 67, 67, 67, 68, 67, 68…
$ flat_model          &lt;chr&gt; "Improved", "Improved", "New Generation", "New Gen…
$ lease_commence_date &lt;int&gt; 1986, 1980, 1980, 1984, 1980, 1981, 1978, 1979, 19…
$ resale_price        &lt;dbl&gt; 250000, 265000, 315000, 320000, 321000, 321000, 32…</code></pre>
</div>
</div>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a><span class="co">#read .csv data files</span></span>
<span id="cb4-2"><a href="#cb4-2"></a>data2 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"data/resale-flat-prices-based-on-registration-date-from-jan-2015-to-dec-2016.csv"</span>)</span>
<span id="cb4-3"><a href="#cb4-3"></a><span class="fu">glimpse</span>(data2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 37,153
Columns: 11
$ month               &lt;chr&gt; "2015-01", "2015-01", "2015-01", "2015-01", "2015-…
$ town                &lt;chr&gt; "ANG MO KIO", "ANG MO KIO", "ANG MO KIO", "ANG MO …
$ flat_type           &lt;chr&gt; "3 ROOM", "3 ROOM", "3 ROOM", "3 ROOM", "3 ROOM", …
$ block               &lt;chr&gt; "174", "541", "163", "446", "557", "603", "709", "…
$ street_name         &lt;chr&gt; "ANG MO KIO AVE 4", "ANG MO KIO AVE 10", "ANG MO K…
$ storey_range        &lt;chr&gt; "07 TO 09", "01 TO 03", "01 TO 03", "01 TO 03", "0…
$ floor_area_sqm      &lt;dbl&gt; 60, 68, 69, 68, 68, 67, 68, 68, 67, 68, 67, 68, 68…
$ flat_model          &lt;chr&gt; "Improved", "New Generation", "New Generation", "N…
$ lease_commence_date &lt;int&gt; 1986, 1981, 1980, 1979, 1980, 1980, 1980, 1981, 19…
$ remaining_lease     &lt;int&gt; 70, 65, 64, 63, 64, 64, 64, 65, 62, 69, 60, 64, 65…
$ resale_price        &lt;dbl&gt; 255000, 275000, 285000, 290000, 290000, 290000, 29…</code></pre>
</div>
</div>
</div>
<div id="tabset-1-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a><span class="co">#read .csv data files</span></span>
<span id="cb6-2"><a href="#cb6-2"></a>data3 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"data/ResaleflatpricesbasedonregistrationdatefromJan2017onwards.csv"</span>)</span>
<span id="cb6-3"><a href="#cb6-3"></a><span class="fu">glimpse</span>(data3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 169,584
Columns: 11
$ month               &lt;chr&gt; "2017-01", "2017-01", "2017-01", "2017-01", "2017-…
$ town                &lt;chr&gt; "ANG MO KIO", "ANG MO KIO", "ANG MO KIO", "ANG MO …
$ flat_type           &lt;chr&gt; "2 ROOM", "3 ROOM", "3 ROOM", "3 ROOM", "3 ROOM", …
$ block               &lt;chr&gt; "406", "108", "602", "465", "601", "150", "447", "…
$ street_name         &lt;chr&gt; "ANG MO KIO AVE 10", "ANG MO KIO AVE 4", "ANG MO K…
$ storey_range        &lt;chr&gt; "10 TO 12", "01 TO 03", "01 TO 03", "04 TO 06", "0…
$ floor_area_sqm      &lt;dbl&gt; 44, 67, 67, 68, 67, 68, 68, 67, 68, 67, 68, 67, 67…
$ flat_model          &lt;chr&gt; "Improved", "New Generation", "New Generation", "N…
$ lease_commence_date &lt;int&gt; 1979, 1978, 1980, 1980, 1980, 1981, 1979, 1976, 19…
$ remaining_lease     &lt;chr&gt; "61 years 04 months", "60 years 07 months", "62 ye…
$ resale_price        &lt;dbl&gt; 232000, 250000, 262000, 265000, 265000, 275000, 28…</code></pre>
</div>
</div>
</div>
</div>
</div>
<div style="background-color: #E8EAF6;    border-radius: 10px;    padding: 20px;">
<p><strong>Observation from the above glimpse:</strong></p>
<ul>
<li><p>The data file “mar-2012-to-dec-2014” is missing the “remaining_lease” column.</p></li>
<li><p>The “remaining_lease” column in “jan-2015-to-dec-2016” is of integer data type.</p></li>
<li><p>The “remaining_lease” column in “Jan-2017-onwards” is of character data type.</p></li>
<li><p>All other column names and data types are identical across the three data files.</p></li>
</ul>
</div>
</section>
<section id="merge-data" class="level2">
<h2 class="anchored" data-anchor-id="merge-data">2.2 Merge Data</h2>
<p>Before merging the three data files, the following steps need to be performed:</p>
<p>Step 1. Add a column named “remaining_lease” to the “mar-2012-to-dec-2014” data file.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Formula of the column “remaining_lease”
</div>
</div>
<div class="callout-body-container callout-body">
<p>According to research, the tenure of Singapore HDB properties is 99 years.</p>
<p>Thus, the value of “remaining_lease” is calculated as 99 - (month - lease_commence_date). Note that “month” stands for the date of HDB resale in the datasets.</p>
</div>
</div>
<p>Step 2. Delete the original “remaining_lease” column in “jan-2015-to-dec-2016” and “Jan-2017-onwards” data file, and create new “remaining_lease” columns with the same formula as above.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a><span class="co"># Calculate remaining lease based on the provided formula</span></span>
<span id="cb8-2"><a href="#cb8-2"></a>data1 <span class="ot">&lt;-</span> data1 <span class="sc">%&gt;%</span></span>
<span id="cb8-3"><a href="#cb8-3"></a>  <span class="fu">mutate</span>(<span class="at">remaining_lease =</span> <span class="dv">99</span> <span class="sc">-</span> (<span class="fu">as.numeric</span>(<span class="fu">substr</span>(month, <span class="dv">1</span>, <span class="dv">4</span>)) <span class="sc">-</span> lease_commence_date))</span>
<span id="cb8-4"><a href="#cb8-4"></a></span>
<span id="cb8-5"><a href="#cb8-5"></a><span class="co"># delete original remaining_lease column and create a new one</span></span>
<span id="cb8-6"><a href="#cb8-6"></a>data2 <span class="ot">&lt;-</span> data2 <span class="sc">%&gt;%</span></span>
<span id="cb8-7"><a href="#cb8-7"></a>  <span class="fu">select</span>(<span class="sc">-</span>remaining_lease) <span class="sc">%&gt;%</span></span>
<span id="cb8-8"><a href="#cb8-8"></a>  <span class="fu">mutate</span>(<span class="at">remaining_lease =</span> <span class="dv">99</span> <span class="sc">-</span> (<span class="fu">as.numeric</span>(<span class="fu">substr</span>(month, <span class="dv">1</span>, <span class="dv">4</span>)) <span class="sc">-</span> lease_commence_date))</span>
<span id="cb8-9"><a href="#cb8-9"></a></span>
<span id="cb8-10"><a href="#cb8-10"></a>data3 <span class="ot">&lt;-</span> data3 <span class="sc">%&gt;%</span></span>
<span id="cb8-11"><a href="#cb8-11"></a>  <span class="fu">select</span>(<span class="sc">-</span>remaining_lease) <span class="sc">%&gt;%</span></span>
<span id="cb8-12"><a href="#cb8-12"></a>  <span class="fu">mutate</span>(<span class="at">remaining_lease =</span> <span class="dv">99</span> <span class="sc">-</span> (<span class="fu">as.numeric</span>(<span class="fu">substr</span>(month, <span class="dv">1</span>, <span class="dv">4</span>)) <span class="sc">-</span> lease_commence_date))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Then, we can start merging the three files together.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a><span class="co"># Merge data1, data2, and data3</span></span>
<span id="cb9-2"><a href="#cb9-2"></a>combined_data <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(data1, data2, data3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="extract-data" class="level2">
<h2 class="anchored" data-anchor-id="extract-data">2.3 Extract Data</h2>
<p>To be able to extract the data from 2013 to 2023, we need to do the follow steps:</p>
<p>Step 1. Make sure the data type of column “month” is date-type.</p>
<p>Step 2. Extract data in 2013-2023.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a><span class="co"># convert data type of "month" column to date</span></span>
<span id="cb10-2"><a href="#cb10-2"></a>combined_data<span class="sc">$</span>month <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="fu">paste0</span>(combined_data<span class="sc">$</span>month, <span class="st">"-01"</span>), <span class="at">format =</span> <span class="st">"%Y-%m-%d"</span>)</span>
<span id="cb10-3"><a href="#cb10-3"></a></span>
<span id="cb10-4"><a href="#cb10-4"></a><span class="co"># Extract data in 2013-2023</span></span>
<span id="cb10-5"><a href="#cb10-5"></a>extract_data <span class="ot">&lt;-</span> combined_data <span class="sc">%&gt;%</span></span>
<span id="cb10-6"><a href="#cb10-6"></a>  <span class="fu">filter</span>(month <span class="sc">&gt;=</span> <span class="fu">as.Date</span>(<span class="st">"2013-01-01"</span>) <span class="sc">&amp;</span> month <span class="sc">&lt;=</span> <span class="fu">as.Date</span>(<span class="st">"2023-12-31"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-default callout-tip no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Explanation of “-01” in the code chunk above
</div>
</div>
<div class="callout-body-container callout-body">
<p>By examining the data, we find that the “month” variable is in the format of “Year/Month/01”, for example “2013/1/1”. For every month, the dataset uses the first day to cover all the records in that particular month, so we decided to set the day as 1 when converting to <code>as.Date</code>.</p>
</div>
</div>
</section>
<section id="check-data-health" class="level2">
<h2 class="anchored" data-anchor-id="check-data-health">2.4 Check Data Health</h2>
<p>Now that we have a single dataframe, we first check the health of the dataframe by:</p>
<p>using <code>glimpse()</code> to look at the structure of the dataframe, data types of the columns, and some values of the dataframe,</p>
<p>using <code>datatable()</code> from the DT package to view the dataframe more interactively,</p>
<p>using <code>duplicate()</code> to check the dataframe for any duplicated entries using duplicate(),</p>
<p>using <code>summary()</code> to check the distribution of values,</p>
<p>using <code>descr()</code> to show the descriptive statistics of non-numerical variables.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true">glimpse()</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false">datatable()</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-3" role="tab" aria-controls="tabset-2-3" aria-selected="false">duplicate()</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-4" role="tab" aria-controls="tabset-2-4" aria-selected="false">summary()</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-5-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-5" role="tab" aria-controls="tabset-2-5" aria-selected="false">descr()</a></li></ul>
<div class="tab-content">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a><span class="fu">glimpse</span>(extract_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 238,519
Columns: 11
$ month               &lt;date&gt; 2013-01-01, 2013-01-01, 2013-01-01, 2013-01-01, 2…
$ town                &lt;chr&gt; "ANG MO KIO", "ANG MO KIO", "ANG MO KIO", "ANG MO …
$ flat_type           &lt;chr&gt; "2 ROOM", "2 ROOM", "2 ROOM", "3 ROOM", "3 ROOM", …
$ block               &lt;chr&gt; "510", "314", "323", "170", "174", "445", "607", "…
$ street_name         &lt;chr&gt; "ANG MO KIO AVE 8", "ANG MO KIO AVE 3", "ANG MO KI…
$ storey_range        &lt;chr&gt; "01 TO 03", "01 TO 03", "04 TO 06", "07 TO 09", "0…
$ floor_area_sqm      &lt;dbl&gt; 44, 44, 44, 61, 60, 67, 68, 67, 68, 67, 74, 67, 68…
$ flat_model          &lt;chr&gt; "Improved", "Improved", "Improved", "Improved", "I…
$ lease_commence_date &lt;int&gt; 1980, 1978, 1977, 1986, 1986, 1979, 1980, 1980, 19…
$ resale_price        &lt;dbl&gt; 253000, 270000, 283000, 305000, 320000, 325000, 32…
$ remaining_lease     &lt;dbl&gt; 66, 64, 63, 72, 72, 65, 66, 66, 65, 66, 66, 65, 66…</code></pre>
</div>
</div>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a><span class="fu">datatable</span>(<span class="fu">head</span>(extract_data), </span>
<span id="cb13-2"><a href="#cb13-2"></a>          <span class="at">class=</span> <span class="st">"compact"</span>,</span>
<span id="cb13-3"><a href="#cb13-3"></a>          <span class="at">rownames =</span> <span class="cn">FALSE</span>,</span>
<span id="cb13-4"><a href="#cb13-4"></a>          <span class="at">width=</span><span class="st">"100%"</span>, </span>
<span id="cb13-5"><a href="#cb13-5"></a>          <span class="at">options =</span> <span class="fu">list</span>(<span class="at">pageLength =</span> <span class="dv">10</span>,<span class="at">scrollX=</span>T))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="htmlwidget-4c57129bd9521118b37a" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-4c57129bd9521118b37a">{"x":{"filter":"none","vertical":false,"data":[["2013-01-01","2013-01-01","2013-01-01","2013-01-01","2013-01-01","2013-01-01"],["ANG MO KIO","ANG MO KIO","ANG MO KIO","ANG MO KIO","ANG MO KIO","ANG MO KIO"],["2 ROOM","2 ROOM","2 ROOM","3 ROOM","3 ROOM","3 ROOM"],["510","314","323","170","174","445"],["ANG MO KIO AVE 8","ANG MO KIO AVE 3","ANG MO KIO AVE 3","ANG MO KIO AVE 4","ANG MO KIO AVE 4","ANG MO KIO AVE 10"],["01 TO 03","01 TO 03","04 TO 06","07 TO 09","01 TO 03","04 TO 06"],[44,44,44,61,60,67],["Improved","Improved","Improved","Improved","Improved","New Generation"],[1980,1978,1977,1986,1986,1979],[253000,270000,283000,305000,320000,325000],[66,64,63,72,72,65]],"container":"<table class=\"compact\">\n  <thead>\n    <tr>\n      <th>month<\/th>\n      <th>town<\/th>\n      <th>flat_type<\/th>\n      <th>block<\/th>\n      <th>street_name<\/th>\n      <th>storey_range<\/th>\n      <th>floor_area_sqm<\/th>\n      <th>flat_model<\/th>\n      <th>lease_commence_date<\/th>\n      <th>resale_price<\/th>\n      <th>remaining_lease<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":10,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":[6,8,9,10]},{"name":"month","targets":0},{"name":"town","targets":1},{"name":"flat_type","targets":2},{"name":"block","targets":3},{"name":"street_name","targets":4},{"name":"storey_range","targets":5},{"name":"floor_area_sqm","targets":6},{"name":"flat_model","targets":7},{"name":"lease_commence_date","targets":8},{"name":"resale_price","targets":9},{"name":"remaining_lease","targets":10}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</div>
<div id="tabset-2-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a><span class="fu">str</span>(extract_data[<span class="fu">duplicated</span>(extract_data),])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   610 obs. of  11 variables:
 $ month              : Date, format: "2013-03-01" "2013-04-01" ...
 $ town               : chr  "JURONG EAST" "BUKIT BATOK" "TOA PAYOH" "TOA PAYOH" ...
 $ flat_type          : chr  "3 ROOM" "3 ROOM" "3 ROOM" "5 ROOM" ...
 $ block              : chr  "252" "523" "57" "81" ...
 $ street_name        : chr  "JURONG EAST ST 24" "BT BATOK ST 52" "LOR 5 TOA PAYOH" "LOR 4 TOA PAYOH" ...
 $ storey_range       : chr  "01 TO 03" "01 TO 03" "01 TO 03" "19 TO 21" ...
 $ floor_area_sqm     : num  67 60 61 122 60 146 74 67 67 93 ...
 $ flat_model         : chr  "New Generation" "Improved" "Standard" "Improved" ...
 $ lease_commence_date: int  1985 1987 1973 1997 1986 1991 1984 1972 1979 2010 ...
 $ resale_price       : num  343000 315000 320000 880000 300000 720000 388000 292000 356000 600000 ...
 $ remaining_lease    : num  71 73 59 83 72 77 70 58 65 96 ...</code></pre>
</div>
</div>
</div>
<div id="tabset-2-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-4-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a><span class="fu">summary</span>(extract_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     month                town            flat_type            block          
 Min.   :2013-01-01   Length:238519      Length:238519      Length:238519     
 1st Qu.:2016-07-01   Class :character   Class :character   Class :character  
 Median :2019-05-01   Mode  :character   Mode  :character   Mode  :character  
 Mean   :2019-01-13                                                           
 3rd Qu.:2021-10-01                                                           
 Max.   :2023-12-01                                                           
 street_name        storey_range       floor_area_sqm    flat_model       
 Length:238519      Length:238519      Min.   : 31.00   Length:238519     
 Class :character   Class :character   1st Qu.: 76.00   Class :character  
 Mode  :character   Mode  :character   Median : 94.00   Mode  :character  
                                       Mean   : 96.99                     
                                       3rd Qu.:112.00                     
                                       Max.   :280.00                     
 lease_commence_date  resale_price     remaining_lease
 Min.   :1966        Min.   : 140000   Min.   :42.00  
 1st Qu.:1984        1st Qu.: 360000   1st Qu.:64.00  
 Median :1993        Median : 447000   Median :74.00  
 Mean   :1994        Mean   : 478311   Mean   :74.66  
 3rd Qu.:2003        3rd Qu.: 563000   3rd Qu.:85.00  
 Max.   :2022        Max.   :1500000   Max.   :98.00  </code></pre>
</div>
</div>
</div>
<div id="tabset-2-5" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-5-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a><span class="fu">descr</span>(extract_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Non-numerical variable(s) ignored: month, town, flat_type, block, street_name, storey_range, flat_model</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Descriptive Statistics  
extract_data  
N: 238519  

                    floor_area_sqm   lease_commence_date   remaining_lease   resale_price
----------------- ---------------- --------------------- ----------------- --------------
             Mean            96.99               1994.22             74.66      478310.91
          Std.Dev            24.17                 13.32             12.97      160952.26
              Min            31.00               1966.00             42.00      140000.00
               Q1            76.00               1984.00             64.00      360000.00
           Median            94.00               1993.00             74.00      447000.00
               Q3           112.00               2003.00             85.00      563000.00
              Max           280.00               2022.00             98.00     1500000.00
              MAD            26.69                 13.34             14.83      143812.20
              IQR            36.00                 19.00             21.00      203000.00
               CV             0.25                  0.01              0.17           0.34
         Skewness             0.28                  0.18              0.02           1.04
      SE.Skewness             0.01                  0.01              0.01           0.01
         Kurtosis            -0.11                 -0.98             -1.04           1.28
          N.Valid        238519.00             238519.00         238519.00      238519.00
        Pct.Valid           100.00                100.00            100.00         100.00</code></pre>
</div>
</div>
</div>
</div>
</div>
<div style="background-color: #E8EAF6;    border-radius: 10px;    padding: 20px;">
<p><strong>Observation from the above:</strong></p>
<ul>
<li><p>From <code>glimpse()</code>, we can see the data types of all variables. There are four numerical variables: <em>floor_area_sqm, lease_commence_date, resale_price, remaining_lease</em>. Seven categorical variables: <em>month, town, flat_type, block, street_name, storey_range, flat_model</em>. Variable <em>town, flat_type, block, street_name, storey_range, flat_model</em> are all character-type.</p></li>
<li><p>From <code>glimpse()</code>, we can see that there are a total of 238,519 rows and 11 columns. Combining the <code>Length</code> of categorical variables seen in <code>summary()</code> and the <code>N.Valid</code> from <code>descr()</code> for numerical variables, we find that each variable has 238,519 values, indicating that there are no missing values in this dataframe.</p></li>
<li><p>From <code>duplicate()</code>, we can see that there are 610 records have duplicate rows. We speculate that it is caused by duplicate data entry.</p></li>
</ul>
</div>
<p>After the above observations, we are going to process the data to make it more suitable for our subsequent analysis.</p>
<p>Step 1. Convert all character-type variables to factor-type variables so that we can analyze the distribution of the different values of categorical variables in subsequent analyses.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a><span class="co"># Convert all character-type variables to factor-type variables.</span></span>
<span id="cb21-2"><a href="#cb21-2"></a>extract_data <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">lapply</span>(extract_data, <span class="cf">function</span>(x) {</span>
<span id="cb21-3"><a href="#cb21-3"></a>  <span class="cf">if</span>(<span class="fu">is.character</span>(x)) {</span>
<span id="cb21-4"><a href="#cb21-4"></a>    <span class="fu">return</span>(<span class="fu">factor</span>(x))</span>
<span id="cb21-5"><a href="#cb21-5"></a>  } <span class="cf">else</span> {</span>
<span id="cb21-6"><a href="#cb21-6"></a>    <span class="fu">return</span>(x)</span>
<span id="cb21-7"><a href="#cb21-7"></a>  }</span>
<span id="cb21-8"><a href="#cb21-8"></a>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Step 2. Remove all the duplicate rows.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1"></a>extract_data <span class="ot">&lt;-</span> <span class="fu">distinct</span>(extract_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Check duplicates again by the code chunk below:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1"></a><span class="fu">str</span>(extract_data[<span class="fu">duplicated</span>(extract_data),])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   0 obs. of  11 variables:
 $ month              : 'Date' num(0) 
 $ town               : Factor w/ 26 levels "ANG MO KIO","BEDOK",..: 
 $ flat_type          : Factor w/ 7 levels "1 ROOM","2 ROOM",..: 
 $ block              : Factor w/ 2699 levels "1","10","100",..: 
 $ street_name        : Factor w/ 567 levels "ADMIRALTY DR",..: 
 $ storey_range       : Factor w/ 17 levels "01 TO 03","04 TO 06",..: 
 $ floor_area_sqm     : num 
 $ flat_model         : Factor w/ 21 levels "2-room","3Gen",..: 
 $ lease_commence_date: int 
 $ resale_price       : num 
 $ remaining_lease    : num </code></pre>
</div>
</div>
</section>
</section>
<section id="save-data" class="level1">
<h1>3 Save Data</h1>
<p>Let’s take a look again at the processed dataframe.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1"></a><span class="fu">glimpse</span>(extract_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 237,909
Columns: 11
$ month               &lt;date&gt; 2013-01-01, 2013-01-01, 2013-01-01, 2013-01-01, 2…
$ town                &lt;fct&gt; ANG MO KIO, ANG MO KIO, ANG MO KIO, ANG MO KIO, AN…
$ flat_type           &lt;fct&gt; 2 ROOM, 2 ROOM, 2 ROOM, 3 ROOM, 3 ROOM, 3 ROOM, 3 …
$ block               &lt;fct&gt; 510, 314, 323, 170, 174, 445, 607, 535, 449, 602, …
$ street_name         &lt;fct&gt; ANG MO KIO AVE 8, ANG MO KIO AVE 3, ANG MO KIO AVE…
$ storey_range        &lt;fct&gt; 01 TO 03, 01 TO 03, 04 TO 06, 07 TO 09, 01 TO 03, …
$ floor_area_sqm      &lt;dbl&gt; 44, 44, 44, 61, 60, 67, 68, 67, 68, 67, 74, 67, 68…
$ flat_model          &lt;fct&gt; Improved, Improved, Improved, Improved, Improved, …
$ lease_commence_date &lt;int&gt; 1980, 1978, 1977, 1986, 1986, 1979, 1980, 1980, 19…
$ resale_price        &lt;dbl&gt; 253000, 270000, 283000, 305000, 320000, 325000, 32…
$ remaining_lease     &lt;dbl&gt; 66, 64, 63, 72, 72, 65, 66, 66, 65, 66, 66, 65, 66…</code></pre>
</div>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1"></a><span class="fu">datatable</span>(<span class="fu">head</span>(extract_data))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-1fffc030cd9c4bdca233" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-1fffc030cd9c4bdca233">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6"],["2013-01-01","2013-01-01","2013-01-01","2013-01-01","2013-01-01","2013-01-01"],["ANG MO KIO","ANG MO KIO","ANG MO KIO","ANG MO KIO","ANG MO KIO","ANG MO KIO"],["2 ROOM","2 ROOM","2 ROOM","3 ROOM","3 ROOM","3 ROOM"],["510","314","323","170","174","445"],["ANG MO KIO AVE 8","ANG MO KIO AVE 3","ANG MO KIO AVE 3","ANG MO KIO AVE 4","ANG MO KIO AVE 4","ANG MO KIO AVE 10"],["01 TO 03","01 TO 03","04 TO 06","07 TO 09","01 TO 03","04 TO 06"],[44,44,44,61,60,67],["Improved","Improved","Improved","Improved","Improved","New Generation"],[1980,1978,1977,1986,1986,1979],[253000,270000,283000,305000,320000,325000],[66,64,63,72,72,65]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>month<\/th>\n      <th>town<\/th>\n      <th>flat_type<\/th>\n      <th>block<\/th>\n      <th>street_name<\/th>\n      <th>storey_range<\/th>\n      <th>floor_area_sqm<\/th>\n      <th>flat_model<\/th>\n      <th>lease_commence_date<\/th>\n      <th>resale_price<\/th>\n      <th>remaining_lease<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[7,9,10,11]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"month","targets":1},{"name":"town","targets":2},{"name":"flat_type","targets":3},{"name":"block","targets":4},{"name":"street_name","targets":5},{"name":"storey_range","targets":6},{"name":"floor_area_sqm","targets":7},{"name":"flat_model","targets":8},{"name":"lease_commence_date","targets":9},{"name":"resale_price","targets":10},{"name":"remaining_lease","targets":11}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>In the end, we will save this dataframe as a rds object for faster loading of data in the future.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1"></a><span class="fu">write_rds</span>(extract_data, <span class="st">"data/resale_hdb.rds"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>


</section>

<a onclick="window.scrollTo(0, 0); return false;" role="button" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../Proposal/Proposal.html" class="pagination-link  aria-label=" proposal"="">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Proposal</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
  </div>
</nav>
</div> <!-- /content -->




</body></html>